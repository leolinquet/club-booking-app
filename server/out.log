Manager account already exists: leolinquet
server listening on :5051
isClubManager? { clubId: 3, userId: 4, ok: true }
POST /book payload: {
  clubId: 3,
  sport: 'tennis',
  courtIndex: 0,
  date: '2025-09-22',
  time: '21:00',
  userId: 4,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'tennis',
  includeLegacyNull: true,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? OR sport IS NULL) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T21:00:00.000-05:00',
  requestedEnd: '2025-09-22T22:00:00.000-05:00',
  now: '2025-09-22T19:21:13.496-05:00',
  valid: true
}
DEBUG booking insert params: {
  clubId: 3,
  courtId: 36,
  startsAtISO: '2025-09-23T02:00:00.000Z',
  endsAtISO: '2025-09-23T03:00:00.000Z',
  targetUserId: 4
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 0
DEBUG availability response sample for {
  clubId: 3,
  sport: 'soccer',
  date: '2025-09-23',
  bookingsCount: 0,
  sample: { time: '15:00', courts: [ [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 3
DEBUG availability: sample bookings [
  {
    id: 22,
    court_index: '1',
    time: '08:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T13:00:00.000Z
  },
  {
    id: 24,
    court_index: '2',
    time: '10:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-23T15:00:00.000Z
  },
  {
    id: 28,
    court_index: '0',
    time: '03:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T08:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-23',
  bookingsCount: 3,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'tennis',
  courtIndex: 0,
  date: '2025-09-23',
  time: '19:20',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'tennis',
  includeLegacyNull: true,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? OR sport IS NULL) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-23T19:20:00.000-05:00',
  requestedEnd: '2025-09-23T20:20:00.000-05:00',
  now: '2025-09-22T19:22:13.717-05:00',
  valid: true
}
DEBUG booking insert params: {
  clubId: 3,
  courtId: 36,
  startsAtISO: '2025-09-24T00:20:00.000Z',
  endsAtISO: '2025-09-24T01:20:00.000Z',
  targetUserId: 5
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 4
DEBUG availability: sample bookings [
  {
    id: 22,
    court_index: '1',
    time: '08:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T13:00:00.000Z
  },
  {
    id: 24,
    court_index: '2',
    time: '10:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-23T15:00:00.000Z
  },
  {
    id: 28,
    court_index: '0',
    time: '03:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T08:00:00.000Z
  },
  {
    id: 43,
    court_index: '0',
    time: '19:20',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-24T00:20:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-23',
  bookingsCount: 4,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 3
DEBUG availability: sample bookings [
  {
    id: 22,
    court_index: '1',
    time: '08:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T13:00:00.000Z
  },
  {
    id: 24,
    court_index: '2',
    time: '10:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-23T15:00:00.000Z
  },
  {
    id: 28,
    court_index: '0',
    time: '03:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T08:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-23',
  bookingsCount: 3,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 5
DEBUG availability: sample bookings [
  {
    id: 9,
    court_index: '2',
    time: '17:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T22:00:00.000Z
  },
  {
    id: 11,
    court_index: '0',
    time: '08:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 12,
    court_index: '2',
    time: '08:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 13,
    court_index: '3',
    time: '13:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T18:00:00.000Z
  },
  {
    id: 42,
    court_index: '0',
    time: '21:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T02:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-22',
  bookingsCount: 5,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'tennis',
  courtIndex: 0,
  date: '2025-09-22',
  time: '19:15',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'tennis',
  includeLegacyNull: true,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? OR sport IS NULL) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T19:15:00.000-05:00',
  requestedEnd: '2025-09-22T20:15:00.000-05:00',
  now: '2025-09-22T19:22:20.199-05:00',
  valid: true
}
DEBUG booking insert params: {
  clubId: 3,
  courtId: 36,
  startsAtISO: '2025-09-23T00:15:00.000Z',
  endsAtISO: '2025-09-23T01:15:00.000Z',
  targetUserId: 5
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 6
DEBUG availability: sample bookings [
  {
    id: 9,
    court_index: '2',
    time: '17:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T22:00:00.000Z
  },
  {
    id: 11,
    court_index: '0',
    time: '08:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 12,
    court_index: '2',
    time: '08:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 13,
    court_index: '3',
    time: '13:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T18:00:00.000Z
  },
  {
    id: 42,
    court_index: '0',
    time: '21:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T02:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-22',
  bookingsCount: 6,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 5
DEBUG availability: sample bookings [
  {
    id: 9,
    court_index: '2',
    time: '17:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T22:00:00.000Z
  },
  {
    id: 11,
    court_index: '0',
    time: '08:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 12,
    court_index: '2',
    time: '08:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 13,
    court_index: '3',
    time: '13:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T18:00:00.000Z
  },
  {
    id: 42,
    court_index: '0',
    time: '21:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T02:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-22',
  bookingsCount: 5,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'tennis',
  courtIndex: 0,
  date: '2025-09-22',
  time: '19:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'tennis',
  includeLegacyNull: true,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? OR sport IS NULL) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T19:00:00.000-05:00',
  requestedEnd: '2025-09-22T20:00:00.000-05:00',
  now: '2025-09-22T19:22:25.499-05:00',
  valid: true
}
DEBUG booking insert params: {
  clubId: 3,
  courtId: 36,
  startsAtISO: '2025-09-23T00:00:00.000Z',
  endsAtISO: '2025-09-23T01:00:00.000Z',
  targetUserId: 5
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 6
DEBUG availability: sample bookings [
  {
    id: 9,
    court_index: '2',
    time: '17:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T22:00:00.000Z
  },
  {
    id: 11,
    court_index: '0',
    time: '08:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 12,
    court_index: '2',
    time: '08:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 13,
    court_index: '3',
    time: '13:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T18:00:00.000Z
  },
  {
    id: 42,
    court_index: '0',
    time: '21:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T02:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-22',
  bookingsCount: 6,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 5
DEBUG availability: sample bookings [
  {
    id: 9,
    court_index: '2',
    time: '17:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T22:00:00.000Z
  },
  {
    id: 11,
    court_index: '0',
    time: '08:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 12,
    court_index: '2',
    time: '08:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 13,
    court_index: '3',
    time: '13:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T18:00:00.000Z
  },
  {
    id: 42,
    court_index: '0',
    time: '21:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T02:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-22',
  bookingsCount: 5,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 0
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-10',
  bookingsCount: 0,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'tennis',
  courtIndex: 0,
  date: '2025-09-10',
  time: '19:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'tennis',
  includeLegacyNull: true,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? OR sport IS NULL) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-10T19:00:00.000-05:00',
  requestedEnd: '2025-09-10T20:00:00.000-05:00',
  now: '2025-09-22T19:22:32.814-05:00',
  valid: true
}
Rejecting past booking (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-10T19:00:00.000-05:00',
  requestedEnd: '2025-09-10T20:00:00.000-05:00',
  now: '2025-09-22T19:22:32.814-05:00'
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 1
DEBUG availability: sample bookings [
  {
    id: 3,
    court_index: '1',
    time: '05:00',
    user_id: 2,
    booked_by: 'user1',
    _starts_at: 2025-09-21T10:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-21',
  bookingsCount: 1,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'tennis',
  courtIndex: 0,
  date: '2025-09-21',
  time: '19:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'tennis',
  includeLegacyNull: true,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? OR sport IS NULL) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-21T19:00:00.000-05:00',
  requestedEnd: '2025-09-21T20:00:00.000-05:00',
  now: '2025-09-22T19:22:37.915-05:00',
  valid: true
}
Rejecting past booking (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-21T19:00:00.000-05:00',
  requestedEnd: '2025-09-21T20:00:00.000-05:00',
  now: '2025-09-22T19:22:37.915-05:00'
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 5
DEBUG availability: sample bookings [
  {
    id: 9,
    court_index: '2',
    time: '17:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T22:00:00.000Z
  },
  {
    id: 11,
    court_index: '0',
    time: '08:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 12,
    court_index: '2',
    time: '08:00',
    user_id: 6,
    booked_by: 'user3',
    _starts_at: 2025-09-22T13:00:00.000Z
  },
  {
    id: 13,
    court_index: '3',
    time: '13:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-22T18:00:00.000Z
  },
  {
    id: 42,
    court_index: '0',
    time: '21:00',
    user_id: 4,
    booked_by: 'leolinquet',
    _starts_at: 2025-09-23T02:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'tennis',
  date: '2025-09-22',
  bookingsCount: 5,
  sample: { time: '19:00', courts: [ [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 0
DEBUG availability response sample for {
  clubId: 3,
  sport: 'soccer',
  date: '2025-09-22',
  bookingsCount: 0,
  sample: { time: '15:00', courts: [ [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'soccer',
  courtIndex: 0,
  date: '2025-09-22',
  time: '15:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'soccer',
  includeLegacyNull: false,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? ) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T15:00:00.000-05:00',
  requestedEnd: '2025-09-22T16:00:00.000-05:00',
  now: '2025-09-22T19:22:48.982-05:00',
  valid: true
}
Rejecting past booking (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T15:00:00.000-05:00',
  requestedEnd: '2025-09-22T16:00:00.000-05:00',
  now: '2025-09-22T19:22:48.982-05:00'
}
POST /book payload: {
  clubId: 3,
  sport: 'soccer',
  courtIndex: 0,
  date: '2025-09-22',
  time: '17:30',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'soccer',
  includeLegacyNull: false,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? ) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T17:30:00.000-05:00',
  requestedEnd: '2025-09-22T18:30:00.000-05:00',
  now: '2025-09-22T19:22:51.704-05:00',
  valid: true
}
Rejecting past booking (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T17:30:00.000-05:00',
  requestedEnd: '2025-09-22T18:30:00.000-05:00',
  now: '2025-09-22T19:22:51.704-05:00'
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 0
DEBUG availability response sample for {
  clubId: 3,
  sport: 'padel',
  date: '2025-09-22',
  bookingsCount: 0,
  sample: { time: '10:00', courts: [ [Object], [Object], [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'padel',
  courtIndex: 1,
  date: '2025-09-22',
  time: '18:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'padel',
  includeLegacyNull: false,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? ) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T18:00:00.000-05:00',
  requestedEnd: '2025-09-22T19:00:00.000-05:00',
  now: '2025-09-22T19:23:03.446-05:00',
  valid: true
}
Rejecting past booking (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T18:00:00.000-05:00',
  requestedEnd: '2025-09-22T19:00:00.000-05:00',
  now: '2025-09-22T19:23:03.446-05:00'
}
POST /book payload: {
  clubId: 3,
  sport: 'padel',
  courtIndex: 1,
  date: '2025-09-22',
  time: '19:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'padel',
  includeLegacyNull: false,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? ) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T19:00:00.000-05:00',
  requestedEnd: '2025-09-22T20:00:00.000-05:00',
  now: '2025-09-22T19:23:06.049-05:00',
  valid: true
}
DEBUG booking insert params: {
  clubId: 3,
  courtId: 67,
  startsAtISO: '2025-09-23T00:00:00.000Z',
  endsAtISO: '2025-09-23T01:00:00.000Z',
  targetUserId: 5
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 1
DEBUG availability: sample bookings [
  {
    id: 46,
    court_index: '1',
    time: '19:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-23T00:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'padel',
  date: '2025-09-22',
  bookingsCount: 1,
  sample: { time: '10:00', courts: [ [Object], [Object], [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 0
DEBUG availability response sample for {
  clubId: 3,
  sport: 'padel',
  date: '2025-09-22',
  bookingsCount: 0,
  sample: { time: '10:00', courts: [ [Object], [Object], [Object], [Object] ] }
}
POST /book payload: {
  clubId: 3,
  sport: 'padel',
  courtIndex: 1,
  date: '2025-09-22',
  time: '20:00',
  userId: 5,
  asUsername: undefined
}
DEBUG legacy booking mapping: {
  clubId: 3,
  requestedSport: 'padel',
  includeLegacyNull: false,
  sql: 'SELECT id FROM courts WHERE club_id = ? AND (sport = ? ) ORDER BY id ASC LIMIT 1 OFFSET ?'
}
booking check (legacy starts_at) {
  clubId: 3,
  clubTz: 'America/Chicago',
  requestedStart: '2025-09-22T20:00:00.000-05:00',
  requestedEnd: '2025-09-22T21:00:00.000-05:00',
  now: '2025-09-22T19:23:11.564-05:00',
  valid: true
}
DEBUG booking insert params: {
  clubId: 3,
  courtId: 67,
  startsAtISO: '2025-09-23T01:00:00.000Z',
  endsAtISO: '2025-09-23T02:00:00.000Z',
  targetUserId: 5
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 1
DEBUG availability: sample bookings [
  {
    id: 47,
    court_index: '1',
    time: '20:00',
    user_id: 5,
    booked_by: 'user2',
    _starts_at: 2025-09-23T01:00:00.000Z
  }
]
DEBUG availability response sample for {
  clubId: 3,
  sport: 'padel',
  date: '2025-09-22',
  bookingsCount: 1,
  sample: { time: '10:00', courts: [ [Object], [Object], [Object], [Object] ] }
}
DEBUG availability: bookings columns: id,club_id,court_id,user_id,starts_at,ends_at
DEBUG availability: bookings count: 0
DEBUG availability response sample for {
  clubId: 3,
  sport: 'padel',
  date: '2025-09-22',
  bookingsCount: 0,
  sample: { time: '10:00', courts: [ [Object], [Object], [Object], [Object] ] }
}
